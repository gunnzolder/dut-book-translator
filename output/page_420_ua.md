### 12.2.2.1 Фільтр Блума

Фільтри Блума призначені для запитів про належність дискретних елементів до множини. Запит про належність до множини має такий вигляд:

Чи траплявся певний елемент у потоці даних?

Фільтри Блума забезпечують спосіб підтримки синопсису потоку, щоб на це запитання можна було відповісти з імовірнісною межею точності. Одна властивість цієї структури даних полягає в тому, що можливі хибно позитивні результати, але не можливі хибно негативні. Іншими словами, якщо фільтр Блума повідомляє, що елемент не належить до потоку, то це завжди буде так. Фільтри Блума називаються "фільтрами", оскільки їх можна використовувати для прийняття важливих рішень про відбір у потоці в режимі реального часу. Це пов'язано з тим, що знання про належність елемента до множини елементів потоку відіграє важливу роль у рішеннях про фільтрацію, таких як видалення дублікатів. Це буде розглянуто більш детально пізніше. Спочатку буде розглянуто простий випадок запитів про належність до потоку.

Фільтр Блума - це двійковий бітовий масив довжиною $m$. Таким чином, вимога до пам'яті для фільтра Блума становить $m/8$ байтів. Елементи бітового масиву індексуються, починаючи з 0 і закінчуючи $(m - 1)$. Отже, діапазон індексів - $[0, 1, 2, ... m - 1]$. З фільтром Блума пов'язано набір з $w$ незалежних хеш-функцій, позначених як $h_1(\cdot) \ldots h_w(\cdot)$. Аргументом кожної з цих хеш-функцій є елемент потоку даних. Хеш-функція відображає рівномірно випадковим чином на ціле число в діапазоні $[0 \ldots m - 1]$.

Розглянемо потік дискретних елементів. Ці дискретні елементи можуть бути адресами електронної пошти (окремо або парами відправник-одержувач), IP-адресами або іншим набором дискретних значень, взятих з величезної області можливих значень. Біти у фільтрі Блума використовуються для відстеження унікальних значень, що зустрічаються. Хеш-функції використовуються для відображення елементів потоку на біти у фільтрі Блума. У наступному обговоренні буде припущено, що структура даних фільтра Блума позначається як $B$.

Фільтр Блума будується з потоку $S$ значень наступним чином. Всі біти у фільтрі Блума ініціалізуються нулями. Для кожного вхідного елемента потоку $x$ до нього застосовуються функції $h_1(x) \ldots h_w(x)$. Для кожного $i \in [1 \ldots w]$ елемент $h_i(x)$ у фільтрі Блума встановлюється в 1. У багатьох випадках значення деяких з цих бітів може вже бути 