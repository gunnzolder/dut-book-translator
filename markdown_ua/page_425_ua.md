Алгоритм CountMinConstruct(Потік: $S$, Ширина: $w$, Висота: $m$)
початок
    Ініціалізувати всі елементи масиву $w \times m$ $CM$ до 0;
    повторювати
        Отримати наступний елемент потоку $x \in S$;
        для $i = 1$ до $w$ зробити
            Збільшити $(i, h_i(x))$-й елемент в $CM$ на 1;
    до кінця потоку $S$;
    повернути $CM$;
кінець

Алгоритм CountMinQuery(Елемент: $y$, Ескіз Count-min: $CM$)
початок
    Ініціалізувати $Оцінка = \infty$;
    для $i = 1$ до $w$ зробити
        $Оцінка = \min(Оцінка, V_i(y))$;
    { $V_i(y)$ - це підрахунок $(i, h_i(y))$-го елемента в $CM$ }
    повернути $Оцінка$;
кінець

[Рисунок 12.5: Оновлення ескізу count-min, сторінка 404]

[Рисунок 12.6: Запити частоти для ескізу count-min, сторінка 404]

комірки $(i, h_i(x))$ оновлюються для $i \in \{1 \ldots w\}$. У псевдокоді опис, результуючий ескіз $CM$ повертається після обробки всіх елементів потоку. На практиці, ескіз count-min може використовуватися в будь-який момент під час проходження потоку $S$. Як і у випадку з фільтром Блума, можливо, що кілька елементів потоку відображаються на одну й ту саму комірку в ескізі count-min. Тому різні елементи потоку будуть збільшувати одну й ту саму комірку, і результуючі підрахунки комірок завжди будуть завищеними оцінками одного або більше підрахунків елементів потоку.

Ескіз count-min може використовуватися для багатьох різних запитів. Найпростіший запит - визначити частоту елемента $y$. Перший крок - обчислити хеш-функції $h_1(y) \ldots h_w(y)$. Для кожного числового масиву в $CM$, значення $V_i(y)$ $(i, h_i(y))$-го елемента масиву вибирається. Значення $V_i(y)$ є завищеною оцінкою справжньої частоти $y$ через потенційні колізії. Тому найбільш точна можлива оцінка може бути отримана за допомогою мінімального значення $min(V_i(y))$ над різними хеш-функціями. Загальна процедура для оцінки частоти проілюстрована на Рис. 12.6.

Ескіз count-min призводить до завищення оцінок частоти через колізії ненегативних частот різних елементів потоку. Тому корисно визначити верхню межу якості оцінки.

Лема 12.2.3 Нехай $E(y)$ - оцінка частоти елемента $y$, використовуючи ескіз count-min розміру $w \times m$. Нехай $n_f$ - загальні частоти всіх елементів, отриманих до цього часу, а $G(y)$ - справжня частота елемента $y$. Тоді, з ймовірністю принаймні $1 - e^{-w}$, верхня межа оцінки $E(y)$ є такою:
$$
E(y) \leq G(y) + \frac{n_f \cdot e}{m}.
$$
Тут $e$ представляє основу натурального логарифму. (12.23)