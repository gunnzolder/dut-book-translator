Основним обмеженням алгоритму STREAM є те, що він не дуже чутливий до еволюції в основному потоці даних. У багатьох випадках шаблони в основному потоці можуть еволюціонувати та значно змінюватися. Тому критично важливо, щоб процес кластеризації міг адаптуватися до таких змін і надавати інформацію за різними часовими горизонтами. У цьому сенсі алгоритм CluStream здатний забезпечити значно кращу інформацію на різних рівнях часової гранулярності.

## 12.4.2 Алгоритм CluStream

Дрейф концепції в потоці даних, що еволюціонує, значно змінює кластери з часом. Кластери за минулий день дуже відрізняються від кластерів за минулий місяць. У багатьох додатках інтелектуального аналізу даних аналітики можуть бажати мати гнучкість визначати кластери на основі одного або кількох часових горизонтів, які невідомі на початку процесу кластеризації потоку. Оскільки потік даних природно накладає одноразове обмеження на розробку алгоритмів, обчислювати кластери за різними часовими горизонтами за допомогою традиційних алгоритмів важко. Пряме розширення алгоритму STREAM на такий випадок вимагало б одночасного підтримання проміжних результатів алгоритмів кластеризації за всіма можливими часовими горизонтами. Обчислювальне навантаження такого підходу зростає з прогресуванням потоку даних і може швидко стати вузьким місцем для онлайн-реалізації.

Природним підходом до вирішення цієї проблеми є застосування процесу кластеризації з дворівневою методологією, що включає онлайн-етап мікрокластеризації та офлайн-етап макрокластеризації. Онлайн-етап мікрокластеризації обробляє потік у режимі реального часу для безперервного підтримання узагальнених, але детальних статистичних даних кластерів потоку. Вони називаються мікрокластерами. Офлайн-етап макрокластеризації далі узагальнює ці детальні кластери, щоб надати користувачеві більш стисле розуміння кластерів за різними часовими горизонтами та рівнями часової гранулярності. Це досягається шляхом збереження достатньо детальної статистики в мікрокластерах, щоб можна було повторно кластеризувати ці детальні представлення за заданими користувачем часовими горизонтами.

### 12.4.2.1 Визначення мікрокластера

Припускається, що багатовимірні записи в потоці даних позначаються як $X_1 . . . X_k . . .$, що надходять у часові мітки $T_1 . . . T_k . . .$. Кожен $X_i$ є багатовимірним записом, що містить $d$ вимірів, позначених як $X_i = (x_i^1 . . . x_i^d)$. Мікрокластери захоплюють узагальнену статистику потоку даних для полегшення кластеризації та аналізу за різними часовими горизонтами. Ця узагальнена статистика визначається наступними структурами:

1. **Мікрокластери**: Мікрокластери визначаються як часове розширення вектора ознак кластера, використаного в алгоритмі BIRCH з розділу 7. Цю концепцію можна розглядати як тимчасово оптимізоване представлення вектора CF, спеціально розроблене для сценарію потоку. Для досягнення цієї мети мікрокластери містять часові статистичні дані, а також статистику ознак.

2. **Пірамідальна часова рамка**: Мікрокластери зберігаються в моментальних знімках у часі, які слідують пірамідальному шаблону. Цей шаблон забезпечує ефективний компроміс між вимогами до сховища та здатністю відновлювати узагальнену статистику з різних часових горизонтів. Це важливо для забезпечення можливості повторної кластеризації даних за різними часовими горизонтами.

Мікрокластери визначаються наступним чином.