Медіана $O(\ln(1/\delta))$ середніх значень різних наборів $O(1/\epsilon^2)$ значень $Q_i \cdot R_i$. Можливо обмежити наближення в межах $1 \pm \epsilon$ з ймовірністю принаймні $1 - \delta$. Це оцінювання також можна виконати за допомогою скетчу count–min, хоча з іншою межею.

2. Евклідову відстань між частотними підрахунками пари потоків можна оцінити як $Q_i^2 + R_i^2 - 2Q_i \cdot R_i$. Евклідову відстань можна розглядати як лінійну комбінацію трьох різних скалярних добутків (включно з самодобутками) між частотними підрахунками двох потоків. Оскільки кожен скалярний добуток сам обмежений за допомогою обговореної вище "хитрості середнього-медіани", цей підхід можна використовувати для визначення меж подібної якості в цьому випадку також.

3. Як і скетч count–min, скетч AMS можна використовувати для оцінювання частотних значень. Для $j$-го унікального елемента потоку з частотою $f_j$ добуток випадкової змінної $r_j$ та $Q_i$ надає оцінку частоти.

$$
E[f_j] = r_j \cdot Q_i \tag{12.29}
$$

Середнє, медіана або комбінація середнього-медіани цих значень для різних компонентів скетчу $Q_i$ можуть бути повідомлені як надійна оцінка. Скетч AMS також можна використовувати для ідентифікації частих елементів у потоці даних.

Деякі запити, що вирішуються скетчами AMS та count–min, є подібними, хоча інші відрізняються. Межі, що надаються цими двома методами, також різні, хоча жоден з них не є строго кращим за інший у всіх сценаріях. Скетч count–min має перевагу в тому, що його легко інтуїтивно інтерпретувати завдяки його природній структурі даних хеш-таблиці. Внаслідок цього його можна більш природно інтегрувати в додатки інтелектуального аналізу даних, такі як кластеризація та класифікація, безшовним чином.

## 12.2.2.4 Алгоритм Флажоле–Мартіна для підрахунку унікальних елементів

Скетчі призначені для визначення статистики потоків, на яку впливають великі агреговані сигнали частих елементів. Однак вони не оптимізовані для оцінювання статистики потоків, на яку впливають рідкісні елементи. Проблеми, такі як підрахунок унікальних елементів, більш безпосередньо залежать від набагато більшої кількості рідкісних елементів у потоці даних. Підрахунок унікальних елементів можна ефективно виконати за допомогою алгоритму Флажоле–Мартіна.

Алгоритм Флажоле–Мартіна використовує хеш-функцію $h(\cdot)$ для відображення заданого елемента $x$ у потоці даних на ціле число в діапазоні $[0, 2^L - 1]$. Значення $L$ вибирається достатньо великим, щоб $2^L$ було верхньою межею для кількості унікальних елементів. Зазвичай значення $L$ вибирається рівним 64 для зручності реалізації, і тому що значення $2^{64}$ достатньо велике для більшості практичних застосувань. Таким чином, бінарне представлення цілого числа $h(x)$ матиме довжину $L$. Визначається позиція найправішого біта 1 у бінарному представленні цілого числа $h(x)$. Таким чином, значення $R$ представляє кількість нульових бітів у кінці цього бінарного представлення. Нехай $R_{\max}$ буде максимальним значенням $R$ для всіх елементів потоку. Значення $R_{\max}$ можна підтримувати інкрементально в сценарії потоку, застосовуючи хеш-функцію до кожного вхідного елемента потоку, визначаючи його найправіший біт і потім оновлюючи $R_{\max}$. Ключова ідея в алгоритмі Флажоле–Мартіна полягає в тому, що динамічно підтримуване значення $R_{\max}$ логарифмічно пов'язане з кількістю унікальних елементів, зустрінутих досі в потоці.