### 12.3.1.1 Вибірка резервуару

Вибірка резервуару є найбільш гнучким підходом для видобування частих шаблонів у потоках даних. Її можна використовувати як для видобування частих елементів (у сценарії масивної області), так і для видобування частих шаблонів. Основна ідея використання вибірки резервуару проста:

1. Підтримувати вибірку резервуару $S$ з потоку даних.
2. Застосувати алгоритм видобування частих шаблонів до вибірки резервуару $S$ і повідомити про знайдені шаблони.

Можливо отримати якісні гарантії щодо видобутих частих шаблонів як функцію від розміру вибірки $S$. Ймовірність того, що шаблон буде хибно позитивним, можна визначити за допомогою границі Чернова. Використовуючи дещо нижчі порогові значення підтримки, також можна гарантовано зменшити кількість хибно негативних результатів. У бібліографічних нотатках містяться посилання на такі гарантії. Вибірка резервуару має кілька переваг гнучкості завдяки чіткому розділенню процесів вибірки та видобування. Практично будь-який ефективний алгоритм видобування частих шаблонів можна використовувати на резидентній у пам'яті вибірці резервуару. Крім того, можна застосовувати різні варіації алгоритмів видобування шаблонів, такі як видобування обмежених шаблонів або видобування цікавих шаблонів. Відстеження концептуального дрейфу також відносно просте. Використання зміщеної вибірки резервуару з готовими методами видобування частих шаблонів перетворюється на зважене визначення підтримки з урахуванням старіння.

### 12.3.1.2 Скетчі

Скетчі можна використовувати для визначення частих елементів, хоча їх не так легко використовувати для визначення частих наборів елементів. Основна ідея полягає в тому, що скетчі, як правило, краще оцінюють частоти більш частих елементів на відносній основі. Це пов'язано з тим, що границя оцінки частоти будь-якого елемента є абсолютною, в якій похибка залежить від сукупної частоти елементів потоку, а не від частоти самого елемента. Це видно з Леми 12.2.3. Внаслідок цього частоти найбільш частих елементів, як правило, можна оцінити більш точно на відносній основі. Як скетч AMS, так і скетч count-min можна використовувати для визначення найбільш частих елементів. У бібліографічних нотатках містяться посилання на деякі з цих алгоритмів.

### 12.3.2 Алгоритм втрачаючого підрахунку

Алгоритм втрачаючого підрахунку можна використовувати як для підрахунку частих елементів, так і для підрахунку частих наборів елементів. Цей підхід ділить потік на сегменти $S_1 . . . S_i . . .$ таким чином, що кожен сегмент $S_i$ має розмір $w = \lceil 1/\epsilon \rceil$. Параметр $\epsilon$ - це задана користувачем допустима похибка.

Спочатку буде описано простішу задачу видобування частих елементів. Алгоритм підтримує частоти всіх елементів у масиві та збільшує їх, коли надходять нові елементи. Якщо кількість різних елементів не дуже велика, можна підтримувати всі підрахунки та повідомляти про часті елементи. Проблема виникає, коли доступний загальний простір менший, ніж потрібно для підтримки підрахунків різних елементів. У таких випадках, коли досягається межа сегмента $S_i$, нечасті елементи видаляються. Це призводить до видалення багатьох елементів, оскільки переважна більшість елементів у потоці є нечастими на практиці. Як вирішити, які елементи слід видалити, щоб зберегти обмеження якості на апроксимацію? Для цього використовується декрементний трюк.

Коли досягається межа сегмента $S_i$, підрахунок частоти кожного елемента в масиві зменшується на 1. Після зменшення елементи з нульовими частотами видаляються з